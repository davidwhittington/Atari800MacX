// Atari800MacX.xcconfig
// Modern build configuration — replaces legacy ppc/i386/10.4u settings.
// Phase 1 of the modernization blueprint.

// --- Deployment ---
MACOSX_DEPLOYMENT_TARGET = 13.0
SDKROOT = macosx

// --- Swift ---
SWIFT_VERSION = 5.9

// --- Security (required for notarization) ---
ENABLE_HARDENED_RUNTIME = YES

// --- ARC ---
// Enable Automatic Reference Counting for all Objective-C files.
// Per-file -fno-objc-arc flags are set via the Xcode "Compile Sources" phase
// for any C files that are compiled as ObjC (none currently).
CLANG_ENABLE_OBJC_ARC = YES

// --- Compiler warnings (additive — tighten over time) ---
GCC_WARN_UNUSED_VARIABLE = YES
GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE
CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES
CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES

// --- Linker ---
DEAD_CODE_STRIPPING = YES

// Carbon.framework is weakly linked so the app can launch on macOS 15+ where
// Carbon is removed. The only Carbon API still in use is the Text Input Sources
// Manager (TISCopyCurrentKeyboardLayoutInputSource / UCKeyTranslate) in KeyMapper.
// Those calls are guarded by null checks and will gracefully fall back to no keymap
// when Carbon is unavailable. Remove this setting once KeyMapper is ported to
// the IOKit HID keyboard layout API (Phase 6/8 work).
WEAK_FRAMEWORKS = $(inherited) Carbon

// UniformTypeIdentifiers.framework required for UTType / UTTypePDF (Phase 4.2+).
OTHER_LDFLAGS = $(inherited) -framework UniformTypeIdentifiers
